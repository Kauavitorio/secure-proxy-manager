# Squid Proxy Configuration
# Main configuration for secure proxy implementation

# Listening port
http_port 3128

# Access control
acl localnet src 10.0.0.0/8
acl localnet src 172.16.0.0/12
acl localnet src 192.168.0.0/16
acl localnet src fc00::/7
acl localnet src fe80::/10

# Safe ports
acl SSL_ports port 443
acl Safe_ports port 80		# http
acl Safe_ports port 21		# ftp
acl Safe_ports port 443		# https
acl Safe_ports port 70		# gopher
acl Safe_ports port 210		# wais
acl Safe_ports port 1025-65535	# unregistered ports
acl Safe_ports port 280		# http-mgmt
acl Safe_ports port 488		# gss-http
acl Safe_ports port 591		# filemaker
acl Safe_ports port 777		# multiling http

# Block all non-safe ports
http_access deny !Safe_ports

# Block CONNECT method to non-SSL ports
http_access deny CONNECT !SSL_ports

# Deny requests to certain unsafe protocols
acl bad_protocols proto FTP
http_access deny bad_protocols

# Allow localhost access
http_access allow localhost

# Load blacklists
acl blacklist dstdomain "/etc/squid/blacklists/domains.txt"
http_access deny blacklist

# Default deny rule
http_access deny all

# Cache settings
cache_dir ufs /var/cache/squid 1000 16 256
cache_mem 256 MB
maximum_object_size 50 MB

# Logging
access_log /var/log/squid/access.log
cache_log /var/log/squid/cache.log
cache_store_log /var/log/squid/store.log

# Set visible hostname
visible_hostname secure-proxy

# Admin info
cache_mgr admin@example.com