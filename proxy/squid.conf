http_port 3128
visible_hostname secure-proxy

# Access control lists
acl localnet src 10.0.0.0/8
acl localnet src 172.16.0.0/12
acl localnet src 192.168.0.0/16
acl localnet src fc00::/7
acl localnet src fe80::/10

# SSL/HTTPS related ACLs
acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 443
acl Safe_ports port 21
acl Safe_ports port 70
acl Safe_ports port 210
acl Safe_ports port 1025-65535
acl Safe_ports port 280
acl Safe_ports port 488
acl Safe_ports port 591
acl Safe_ports port 777

# IP blacklists
acl ip_blacklist src "/etc/squid/blacklists/ip/local.txt"

# Domain blacklists
acl domain_blacklist dstdomain "/etc/squid/blacklists/domain/local.txt"

# Basic access control
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access deny ip_blacklist
http_access deny domain_blacklist

# Allow local network access
http_access allow localnet
http_access allow localhost

# Default deny
http_access deny all

# Caching options
cache_dir ufs /var/spool/squid 1000 16 256
coredump_dir /var/spool/squid

# Log settings
access_log daemon:/var/log/squid/access.log squid
cache_log /var/log/squid/cache.log
cache_store_log stdio:/var/log/squid/store.log

refresh_pattern ^ftp:           1440    20%     10080
refresh_pattern ^gopher:        1440    0%      1440
refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
refresh_pattern .               0       20%     4320